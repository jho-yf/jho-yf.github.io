# Spring Security OAuth2.0 认证授权

## 基本概念

### 1. 认证

- 判断用户的身份是否合法的过程。
- 用户去访问系统资源时系统要求验证用户的身份信息，身份合法方可继续访问，不合法则拒绝访问。

### **2. 会话**

用户认证通过之后，为了避免用户每次操作都需要进行认证，可将**用户信息**保存在**会话**当中。

#### 常见会话机制

* 基于session方式
  * 用户认证后，在服务端生成用户相关数据保存在session中，发给客户端session_id并存放到cookie中。
  * 当用户再次发出请求时，会带上session_id，就可以验证服务器是否存在session数据，以此完成用户的合法校验。
  * 当用户退出系统或session过期销毁，客户端的session_id也就失效了。

- 基于token方式
  - 用户认证后，在服务端生成一个token发给客户端，客户端可以选择存放在cookie或localStorage等存储中，每次请求时带上token，服务端收到token并进行用户的合法校验。

### 3. 授权

- 授权是用户认证通过之后，系统根据用户权限来控制用户访问资源的过程，拥有资源的访问权限则正常访问，没有权限则拒绝访问。
- 认证用于保护用户身份的合法性，授权则是为了更细粒度的对隐私数据进行划分，授权在认证通过后发生的。
- 授权可简单理解为**Who**对**What（Which）**进行**How**操作

#### 授权的数据模型

- **Who**：即主体（Subject），一般指的是用户，也可以是程序
- **What**：即资源（Resource），主体需要访问系统中的什么资源
  - 实体资源（数据资源）：商品信息、订单信息等
  - 系统功能资源：系统菜单、页面、按钮等
- **How**：即权限（Permission），规定用户对资源的操作许可（权限），通过权限可知用户对哪些资源有操作许可，权限离开了资源就没有意义了

### 4. RBAC

#### 基于角色的访问控制（Role-Based Access Control）

- 按角色进行授权

#### 基于资源的访问控制（Resource-Based Access Control）

* 按资源进行授权

* 系统设计时定义好资源的权限标识，主体访问时判断是否拥有对应权限

## 基于Session的认证方式
